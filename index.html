<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØºØ§Ù…Ø¶Ø© - Ù„ØºØªÙŠ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { font-size: 2.5rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); margin-bottom: 10px; }
        
        .scoreboard {
            display: flex; justify-content: center; gap: 50px;
            background: rgba(255, 255, 255, 0.1); padding: 15px;
            border-radius: 15px; margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); width: 80%; max-width: 600px;
        }
        
        .team h2 { margin: 0; font-size: 1.5rem; color: #f1c40f; }
        .score { font-size: 2.5rem; font-weight: 900; margin: 5px 0; }
        
        .grid-container {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 15px; width: 90%; max-width: 800px;
        }
        
        .box {
            background: linear-gradient(45deg, #3498db, #2980b9);
            height: 120px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; font-weight: bold; cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 0 #1c5980; position: relative;
        }
        
        .box:hover { transform: translateY(-5px); box-shadow: 0 8px 0 #1c5980; }
        
        .box.opened {
            background: #7f8c8d; box-shadow: none;
            transform: translateY(5px); cursor: default; color: #bdc3c7;
        }
        
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); display: none;
            justify-content: center; align-items: center; z-index: 1000;
        }
        
        .modal-content {
            background: white; color: #333; padding: 40px 30px 30px 30px;
            border-radius: 20px; width: 90%; max-width: 600px;
            text-align: center; position: relative; border: 5px solid #f1c40f;
        }

        .timer-circle {
            width: 70px; height: 70px; background: #3498db; color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; font-weight: bold; position: absolute;
            top: -35px; left: 50%; transform: translateX(-50%);
            border: 5px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .question-text { font-size: 1.8rem; margin: 20px 0; font-weight: bold; color: #2c3e50; }
        
        .answer-text {
            font-size: 1.5rem; color: #27ae60; margin: 20px 0; display: none;
            padding: 10px; background: #e8f8f5; border-radius: 10px; border: 2px dashed #27ae60;
        }

        .btn {
            padding: 10px 25px; font-size: 1.2rem; border: none; border-radius: 8px;
            cursor: pointer; font-family: 'Cairo', sans-serif; margin: 5px; transition: 0.2s;
        }
        .btn-show { background: #3498db; color: white; }
        .btn-correct { background: #27ae60; color: white; }
        .btn-close { background: #95a5a6; color: white; }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ */
        #error-msg {
            display: none; background: #e74c3c; color: white; padding: 20px;
            margin: 20px; border-radius: 10px; border: 2px solid white; font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>ğŸ“¦ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„ØºØ§Ù…Ø¶Ø© - Ù„ØºØªÙŠ (2Ù…) ğŸ“¦</h1>

    <div id="error-msg"></div>

    <div class="scoreboard">
        <div class="team">
            <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</h2>
            <div class="score" id="scoreA">0</div>
        </div>
        <div class="team">
            <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</h2>
            <div class="score" id="scoreB">0</div>
        </div>
    </div>

    <div class="grid-container" id="grid"></div>

    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div class="timer-circle" id="timerDisplay">30</div>
            <h2 style="color:#e67e22" id="modalTitle">Ø³Ø¤Ø§Ù„</h2>
            <div class="question-text" id="qText"></div>
            <button class="btn btn-show" onclick="showAnswer()">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
            <div class="answer-text" id="aText"></div>
            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
            <p>Ù…Ù† Ø§Ù„ÙØ§Ø¦Ø²ØŸ</p>
            <button class="btn btn-correct" onclick="addPoint('A')">Ù†Ù‚Ø·Ø© Ù„Ù„ÙØ±ÙŠÙ‚ 1</button>
            <button class="btn btn-correct" onclick="addPoint('B')">Ù†Ù‚Ø·Ø© Ù„Ù„ÙØ±ÙŠÙ‚ 2</button>
            <button class="btn btn-close" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
    // ÙˆØ¶Ø¹Ù†Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ try-catch Ù„Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
    try {
        const questions = [
            { q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ù„Ø§Ù…Ø© Ø±ÙØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø®Ù…Ø³Ø©ØŸ", a: "Ø§Ù„ÙˆØ§Ùˆ" },
            { q: "Ø­Ø¯Ø¯ Ø§Ù„Ø­Ø§Ù„ ÙÙŠ Ø§Ù„Ø¬Ù…Ù„Ø©: (Ø¬Ø§Ø¡ Ø§Ù„Ø·Ø§Ù„Ø¨Ù Ù…Ø³Ø±Ø¹Ø§Ù‹)", a: "Ù…Ø³Ø±Ø¹Ø§Ù‹" },
            { q: "(ÙŠØ§ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ø¬ØªÙ‡Ø¯ÙˆØ§). Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø§Ø¯Ù‰ØŸ", a: "Ù†ÙƒØ±Ø© Ù…Ù‚ØµÙˆØ¯Ø© (Ø£ÙŠ)" },
            { q: "Ù…ÙØ§Ø¬Ø£Ø©! ğŸ‰\nØ­ØµÙ„ØªÙ… Ø¹Ù„Ù‰ 5 Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ©!", a: "Ù…Ø¨Ø±ÙˆÙƒ!", type: "gift" },
            { q: "ÙƒÙŠÙ ØªÙØ±Ø³Ù… Ø§Ù„Ù‡Ù…Ø²Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙƒØ³ÙˆØ±Ø©ØŸ", a: "Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ§Ø¡ (Ø§Ù„Ù†Ø¨Ø±Ø©)" },
            { q: "Ù…Ø§ Ù‡Ùˆ ÙˆØ²Ù† ÙƒÙ„Ù…Ø© (Ø§Ø³ØªØºÙØ§Ø±)ØŸ", a: "Ø§Ø³ØªÙØ¹Ø§Ù„" },
            { q: "Ø­ÙˆÙ„ Ø§Ù„ÙØ¹Ù„ (Ø´ÙØ±ÙØ¨Ù) Ø¥Ù„Ù‰ Ù…Ø¨Ù†ÙŠ Ù„Ù„Ù…Ø¬Ù‡ÙˆÙ„.", a: "Ø´ÙØ±ÙØ¨Ù" },
            { q: "Ù…Ø§ Ø¶Ø¯ ÙƒÙ„Ù…Ø© (Ø§Ù„Ø¥ÙŠØ«Ø§Ø±)ØŸ", a: "Ø§Ù„Ø£Ø«Ø±Ø© (Ø£Ùˆ Ø§Ù„Ø£Ù†Ø§Ù†ÙŠØ©)" },
            { q: "Ø­Ø¯Ø¯ Ø§Ù„ØªÙ…ÙŠÙŠØ² ÙÙŠ Ø§Ù„Ø¬Ù…Ù„Ø©: (Ø§Ø´ØªØ±ÙŠØªÙ Ø¹Ø´Ø±ÙŠÙ†Ù ÙƒØªØ§Ø¨Ø§Ù‹)", a: "ÙƒØªØ§Ø¨Ø§Ù‹" },
            { q: "Ù…ÙØ§Ø¬Ø£Ø©! ğŸ’£\nØ®Ø³Ø±ØªÙ… Ø§Ù„Ø¯ÙˆØ± (Ø§Ù†ØªÙ‚Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ)", a: "Ø­Ø¸Ø§Ù‹ Ø£ÙˆÙØ±", type: "bomb" },
            { q: "ØµØº Ø§Ø³Ù… Ø§Ù„ÙØ§Ø¹Ù„ Ù…Ù† Ø§Ù„ÙØ¹Ù„ (Ù‚Ø§Ù„).", a: "Ù‚Ø§Ø¦Ù„" },
            { q: "Ø£Ø¹Ø±Ø¨ ÙƒÙ„Ù…Ø© (Ø£Ø®ÙˆÙƒ) ÙÙŠ Ø¬Ù…Ù„Ø©: (Ø¬Ø§Ø¡ Ø£Ø®ÙˆÙƒ).", a: "ÙØ§Ø¹Ù„ Ù…Ø±ÙÙˆØ¹ Ø¨Ø§Ù„ÙˆØ§Ùˆ" },
            { q: "(Ù„Ø§ ØªÙ‡Ù…Ù„Ù’ Ø¯Ø±ÙˆØ³Ùƒ). Ù…Ø§ Ù†ÙˆØ¹ (Ù„Ø§) Ù‡Ù†Ø§ØŸ", a: "Ù„Ø§ Ø§Ù„Ù†Ø§Ù‡ÙŠØ© (Ø¬Ø§Ø²Ù…Ø©)" },
            { q: "Ø¬Ù…Ø¹ ØªÙƒØ³ÙŠØ± Ù„ÙƒÙ„Ù…Ø© (Ø¹Ø§Ù„Ù…).", a: "Ø¹Ù„Ù…Ø§Ø¡" },
            { q: "Ø³Ø¤Ø§Ù„ Ø³Ø±Ø¹Ø©: Ø¹Ø¯Ø¯ Ø­Ø±ÙˆÙ Ø§Ù„Ø¬Ø± Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø§Ù„Ù…Ø´Ù‡ÙˆØ±Ø©.", a: "Ù…Ù†ØŒ Ø¥Ù„Ù‰ØŒ Ø¹Ù†ØŒ Ø¹Ù„Ù‰ØŒ ÙÙŠØŒ Ø§Ù„Ø¨Ø§Ø¡ØŒ Ø§Ù„ÙƒØ§ÙØŒ Ø§Ù„Ù„Ø§Ù…" },
            { q: "Ù‡Ø¯ÙŠØ©! ğŸ‰\nÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© Ù„ÙØ±ÙŠÙ‚Ùƒ.", a: "Ø§Ø³ØªØºÙ„ Ø§Ù„ÙØ±ØµØ©!", type: "gift" }
        ];

        let scores = { A: 0, B: 0 };
        let currentBox = null;
        let timerInterval;
        const TIME_LIMIT = 30;

        const grid = document.getElementById('grid');
        const modal = document.getElementById('modal');
        const qText = document.getElementById('qText');
        const aText = document.getElementById('aText');
        const modalTitle = document.getElementById('modalTitle');
        const scoreAEl = document.getElementById('scoreA');
        const scoreBEl = document.getElementById('scoreB');
        const timerDisplay = document.getElementById('timerDisplay');

        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        if (!grid || !modal) throw new Error("Ø¹Ù†Ø§ØµØ± HTML Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù…ÙÙ‚ÙˆØ¯Ø©!");

        function initGrid() {
            grid.innerHTML = '';
            questions.forEach((item, index) => {
                const box = document.createElement('div');
                box.className = 'box';
                box.textContent = index + 1;
                box.onclick = () => openBox(index, box);
                grid.appendChild(box);
            });
        }

        function openBox(index, boxElement) {
            if (boxElement.classList.contains('opened')) return;
            currentBox = boxElement;
            const data = questions[index];
            modalTitle.innerText = data.type === 'gift' ? 'Ù…ÙØ§Ø¬Ø£Ø©!' : (data.type === 'bomb' ? 'ØªÙ†Ø¨ÙŠÙ‡!' : Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${index + 1});
            qText.innerText = data.q;
            aText.innerText = data.a;
            aText.style.display = 'none';
            modal.style.display = 'flex';

            if (!data.type) {
                timerDisplay.style.display = 'flex';
                startTimer();
            } else {
                timerDisplay.style.display = 'none';
            }
        }

        function startTimer() {
            let timeLeft = TIME_LIMIT;
            timerDisplay.innerText = timeLeft;
            timerDisplay.style.background = '#3498db';
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.innerText = timeLeft;
                if (timeLeft <= 10) timerDisplay.style.background = '#e74c3c';
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.innerText = "Ø§Ù†ØªÙ‡Ù‰";
                }
            }, 1000);
        }

        // Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© Ù„Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¹Ø§Ù… (Global Scope) Ù„ØªØ¹Ù…Ù„ Ù…Ø¹ HTML onclick
        window.showAnswer = function() {
            aText.style.display = 'block';
            clearInterval(timerInterval);
        };

        window.addPoint = function(team) {
            const points = qText.innerText.includes('5 Ù†Ù‚Ø§Ø·') ? 5 : 1;
            if (team === 'A') scores.A += points; else scores.B += points;
            scoreAEl.innerText = scores.A;
            scoreBEl.innerText = scores.B;
            closeModal(true);
        };

        window.closeModal = function(markAsOpened = false) {
            modal.style.display = 'none';
            clearInterval(timerInterval);
            if (markAsOpened === true && currentBox) {
                currentBox.classList.add('opened');
                currentBox.innerHTML = 'âœ”';
            }
        };

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
        initGrid();

    } catch (error) {
        // ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§
        const errDiv = document.getElementById('error-msg');
        errDiv.style.display = 'block';
        errDiv.innerHTML = 'âš  Ø­Ø¯Ø« Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠ Ù…Ù†Ø¹ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª:<br>' + error.message;
        console.error(error);
    }
    </script>
</body>
</html>
